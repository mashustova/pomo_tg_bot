### Документация Telegram-бота

#### Название: **Google Calendar Task Bot**

#### Описание
Google Calendar Task Bot — это телеграм-бот, который помогает управлять событиями и задачами в Google Calendar. С его помощью можно добавлять события, используя простой и интуитивно понятный интерфейс.

---

### Основные функции
1. **Добавление событий в Google Calendar**  
   - Пользователь может создать событие, указав его описание, дату, время начала и окончания.
   - Если какие-либо данные отсутствуют, бот запросит уточнения.
   -  Бот проверяет правильность ввода даты и времени, предупреждая, если указано прошедшее время.

2. **Управление задачами**  
   - Возможность добавлять задачи с указанием заголовка и срока выполнения.
   - Бот проверяет правильность ввода даты и времени, предупреждая, если указано прошедшее время.

3. **Авторизация через Google**  
   - Поддержка OAuth 2.0 для безопасного доступа к Google Calendar.
   - Авторизация осуществляется с помощью электронной почты Google.

4. **Настройка часового пояса**  
   - Возможность указать свой часовой пояс и помень его в процессе для корректного отображения времени событий.

---

### Команды
#### Основные команды:
- `/start` — Запуск бота. Показывает приветственное сообщение и описание возможностей.
- `/auth` — Авторизация через Google. Бот запросит вашу электронную почту.
- `/add_event` — Добавление нового события в календарь.
- `/add_task` — Добавление задачи с указанием срока выполнения.
- `/set_timezone` — Установить часовой пояс.
- `/help`
  Показывает список всех доступных команд и краткие описания их функциональности.
- `/cancel`
  Прерывает текущую операцию и возвращает на предыдущий шаг. 

#### Примеры:
- **Добавление события**:  
  _"Добавить событие встреча завтра в 15:00"_  
  Бот создаст событие с указанным временем начала и уточнит время окончания.

- **Добавление задачи**:  
  _"Купить продукты к 23 декабря"_  
  Бот создаст задачу с указанным сроком выполнения.

---

### Логика обработки данных
1. **Обработка пользовательского ввода**:
   - Если указано недостаточно данных (например, отсутствует время окончания события), бот запросит дополнительные уточнения.
   - Все даты и время автоматически преобразуются в формат ISO 8601 с учетом часового пояса пользователя.

2. **Проверка времени**:
   - При создании события или задачи бот проверяет, чтобы указанное время не находилось в прошлом.

3. **Авторизация**:
   - Данные авторизации (токены) сохраняются локально для каждого пользователя, чтобы избежать повторного ввода.

---

### Используемые технологии
- **Язык**: Python
- **Фреймворк**: Aiogram
- **Интеграция**: Google Calendar API, OAuth 2.0, Open AI
- **Формат времени**: ISO 8601 (например, `2024-12-29T13:00:00.000Z`)

---

### Возможные ошибки и их обработка
1. **Некорректные данные**:
   - Если пользователь указывает дату или время в неверном формате, бот запросит уточнение.

2. **Указано прошедшее время**:
   - Бот отправит сообщение: _"Невозможно установить событие на прошедшее время."_  

---

### Примечания
- Все данные пользователя хранятся в локальных файлах и не передаются третьим лицам.
- Убедитесь, что ваш Google Calendar активен и подключен к вашему аккаунту.